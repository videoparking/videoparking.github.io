(this["webpackJsonpfirst-blood-part-ii"]=this["webpackJsonpfirst-blood-part-ii"]||[]).push([[0],{16:function(e,t,n){e.exports=n(41)},21:function(e,t,n){},23:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(12),c=n.n(o),i=(n(21),n(2)),u=n.n(i),s=n(15),m=n(13),l=(n(23),n(14)),f=n.n(l).a.create({baseURL:"https://ib9m7jp63g.execute-api.eu-central-1.amazonaws.com/dev/"}),p=console.log;function d(){return(d=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("view");case 2:return t=e.sent,console.log("response:",t),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){var e=Object(r.useState)({picSrc:void 0,firstPic:!0}),t=Object(s.a)(e,2),n=t[0],o=t[1],c=function(e,t){var n=function(e){var t=e/60;return Math.max(0,Math.min(100,100-25*t))}(((new Date).getTime()-new Date(t).getTime())/1e3-65);return{backgroundImage:"url(".concat(e,")"),backgroundColor:"#282c34",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundPosition:"center",filter:"blur(".concat(0,"px) saturate(").concat(n,"%)")}};return Object(r.useEffect)((function(){var e=n.firstPic?0:n.duration;console.log("Timeout till renew:",e);var t=setTimeout((function(){(function(){return d.apply(this,arguments)})().then((function(e){p(e);var t=e.duration?e.duration:60,n=e.url,r=e.frameTime,a=c(n,r);o({picSrc:n,firstPic:!1,duration:t,frameTime:r,style:a}),document.title=e.message+", parking at ".concat(new Date(r))})).catch((function(e){console.log(e);var t=c(n.picSrc,n.frameTime),r=n.retries?n.retries+1:0;o({picSrc:n.picSrc,firstPic:!1,duration:30,frameTime:n.frameTime,style:t,retries:r}),document.title="Retrying (".concat(r,")")+(n.frameTime?" from ".concat(n.frameTime," ..."):"...")}))}),1e3*e);return function(){return clearTimeout(t)}})),a.a.createElement("div",{className:"App",style:n.style},a.a.createElement("div",{className:"App-header"},n.frameTime?"":"Loading parking view..."))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.67a14dd1.chunk.js.map